
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Giocode labs</title>
  <meta name="author" content="Rindra Ramamonjison">

  
  <meta name="description" content="In this blog post, I will demonstrate the functional way of solving problems using the popular Rush Hour board game as an example. I will employ &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://giocode.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Giocode labs" type="application/atom+xml">
  <script src="//use.typekit.net/qja5dag.js"></script>
  <script>try{Typekit.load();}catch(e){}</script>
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Serif" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Giocode labs</a></h1>
  
    <h2>A playground for code, data and models</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
  
  
  
  
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:giocode.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/projects/index.html">Projects</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/16/functional-playground-solving-rush-hour-game-in-haskell/">Functional Playground: Solving the Rush Hour Game in Haskell</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-16T17:01:36-07:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>5:01 pm</span></time>
        
           | <a href="/blog/2014/10/16/functional-playground-solving-rush-hour-game-in-haskell/#disqus_thread"
             data-disqus-identifier="http://giocode.github.io/blog/2014/10/16/functional-playground-solving-rush-hour-game-in-haskell/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="right" src="/images/rushhour.png" width="250" height="250">
In this blog post, I will demonstrate the functional way of solving problems using the popular <a href="http://www.thinkfun.com/rushhour">Rush Hour</a> board game as an example. I will employ simple yet powerful language features that Haskell provides to produce expressive and modular programs, which are:</p>

<ul>
<li>Types and abstractions</li>
<li>Pattern matching and recursions</li>
<li>Higher-order functions and combinators</li>
<li>Function composition and currying</li>
</ul>


<h2>Rush Hour: the game</h2>

<p>The Rush Hour game consists of a traffic grid in which some cars and trucks are laid out. The goal is to find a path for the Red Car to exit by moving the other blocking vehicles out of its way. Created by Nob Yoshigahara in the 70&rsquo;s, this game has kept people entertained and puzzled with its several levels of difficulty.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/10/16/functional-playground-solving-rush-hour-game-in-haskell/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/15/scala-flavors-a-tasting-tour/">Scala Flavors: A Tasting Tour Part 1</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-15T17:50:32-07:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>5:50 pm</span></time>
        
           | <a href="/blog/2014/10/15/scala-flavors-a-tasting-tour/#disqus_thread"
             data-disqus-identifier="http://giocode.github.io/blog/2014/10/15/scala-flavors-a-tasting-tour/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This a is the first part on a series of tutorials on Scala&rsquo;s language features. This series are written for anyone who are new to Scala, knows its syntax a bit but are excited and scared at the same type by the bipolarity of this <code>beautiful</code> language. In this first part, we will cover two points:</p>

<ul>
<li>Scala&rsquo;s type system</li>
<li>Scala&rsquo;s purely object-oriented language features</li>
</ul>


<h2>Starting strong and safe</h2>

<p>Scala&rsquo;s type system is strong, static and safe. What does that mean?</p>

<h3>Values, variables and Types</h3>

<p>There are two possible ways to associate a name to a value or an expression. The first one is <code>val</code>, which is used to permanently bind a value to an indentifier. Once a val is set, its value can no longer be reassigned. In other words, vals are like constants.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">y</span> <span class="k">=</span> <span class="mf">5.0</span>
</span><span class='line'><span class="n">y</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="mf">5.0</span>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">message</span> <span class="k">=</span> <span class="s">&quot;Holla scala&quot;</span>
</span><span class='line'><span class="n">message</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">Holla</span> <span class="n">scala</span>
</span></code></pre></td></tr></table></div></figure>


<p>Changing the content of <code>message</code> to <em>&ldquo;Bye scala&rdquo;</em> is not possible. Instead, it will generate a compilation error because of a reassignment to a val.</p>

<p>The second one is <code>var</code>. You use a var for variables. Unlike vals, the value that a <code>var</code> refers to can be changed or reassigned in the future. For example, the <code>numberOfRabbits</code> enrolled to your farming program will probably keep growing.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">var</span> <span class="n">numberOfRabbits</span> <span class="k">=</span> <span class="mi">6</span>
</span><span class='line'><span class="n">numberOfRabbits</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">10</span>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="n">numberOfRabbits</span> <span class="k">=</span> <span class="n">numberOfRabbits</span> <span class="o">*</span> <span class="mi">4</span>
</span><span class='line'><span class="n">numberOfRabbits</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">40</span>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="n">numberOfRabbits</span> <span class="k">=</span> <span class="n">numberOfRabbits</span> <span class="o">*</span> <span class="mi">4</span>
</span><span class='line'><span class="n">numberOfRabbits</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">160</span>
</span></code></pre></td></tr></table></div></figure>


<p>Once a var is declared, its type however cannot be modified. In other words, numberOfRabbits can only contain an integer. Reassigning a string to it will not compile.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">numberOfRabbits</span> <span class="k">=</span> <span class="s">&quot;will not compile&quot;</span>
</span><span class='line'><span class="c1">// Expression of type String doesn&#39;t comform to expected type Int.</span>
</span></code></pre></td></tr></table></div></figure>


<p>We have not yet explained what these types are about. Since Scala is a statically typed language, any values and variables are initialized with their type and content. Looking at the REPL outputs above, we did not declare any type when defining <code>y</code>, <code>message</code> or <code>numberOfRabbits</code>. So how did Scala know? Well, Scala is smart enough to infer the type from the right hand side of the assignment. Scala understood that &ldquo;Holla scala&rdquo; is definitely a string whereas the decimal 5.0 looks like a Double.</p>

<p>In principle, a formal way to define vals and vars is like this.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="c1">// The right side must return a value of the declared type.</span>
</span><span class='line'><span class="k">val</span> <span class="n">identifier</span><span class="k">:</span> <span class="k">type</span> <span class="o">=</span> <span class="n">expression</span>
</span></code></pre></td></tr></table></div></figure>


<p>In some situations, we want to declare vals and vars without giving them an initial value. In that case, the type declaration is mandatory. Otherwise, the rule of thumb is to omit the types when they can be readily inferred with a glimpse and to declare them to add clarity to your code.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">z</span><span class="k">:</span> <span class="kt">Boolean</span><span class="o">;</span>  <span class="c1">// Scala follows you</span>
</span><span class='line'><span class="k">val</span> <span class="n">w</span><span class="o">;</span>           <span class="c1">// Scala will cry out loud</span>
</span></code></pre></td></tr></table></div></figure>


<p>You must be still asking yourself why we need vals when we can use vars. Be patient as we will come back to this question when we will later discuss the choice between mutable and immutable data. For now, let&rsquo;s get our feet wet by reviewing some basic types and operators.</p>

<h3>Basic Scala types and operators</h3>

<p>There are 3 types of operators:</p>

<ul>
<li>binary operators which take two operands on their left and right sides</li>
<li>unary prefix operators which are applied to one operand on its right</li>
<li>unary postix operators which have one operand on its left</li>
</ul>


<p>Here are some examples of binary and unary operators for the basic numeric types.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="c1">// Binary operators</span>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="mi">20</span> <span class="o">*</span> <span class="mf">1.20</span>
</span><span class='line'><span class="nc">Double</span> <span class="k">=</span> <span class="mf">24.0</span>
</span><span class='line'>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">2</span>
</span><span class='line'><span class="nc">Int</span> <span class="k">=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">larger</span> <span class="k">=</span> <span class="mi">3</span> <span class="n">max</span> <span class="mi">7</span>
</span><span class='line'><span class="n">larger</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">7</span>
</span><span class='line'>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">remainder</span> <span class="k">=</span> <span class="mi">11</span> <span class="o">%</span> <span class="mi">3</span>
</span><span class='line'><span class="n">remainder</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">2</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// A unary prefix operator</span>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">decimalNumber</span> <span class="k">=</span> <span class="o">-</span> <span class="mf">102.876</span>
</span><span class='line'><span class="nc">Double</span> <span class="k">=</span> <span class="o">-</span> <span class="mf">102.876</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// A unary postfix operator</span>
</span><span class='line'><span class="n">decimalNumber</span> <span class="n">toInt</span>
</span><span class='line'><span class="nc">Int</span> <span class="k">=</span> <span class="o">-</span> <span class="mi">102</span>
</span></code></pre></td></tr></table></div></figure>


<p>Similarly, logical operators on Boolean values can be either unary or binary.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">veracity</span> <span class="k">=</span> <span class="kc">true</span>
</span><span class='line'><span class="n">veracity</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span>
</span><span class='line'>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">var</span> <span class="n">lie</span> <span class="k">=</span> <span class="o">!</span> <span class="n">veracity</span>    <span class="c1">// a prefix operator</span>
</span><span class='line'><span class="n">lie</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span>
</span><span class='line'>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="n">veracity</span> <span class="o">&amp;&amp;</span> <span class="n">lie</span>
</span><span class='line'><span class="nc">Boolean</span> <span class="k">=</span> <span class="kc">false</span>
</span><span class='line'>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">halftruth</span> <span class="k">=</span> <span class="n">veracity</span> <span class="o">||</span> <span class="n">lie</span>
</span><span class='line'><span class="n">halftruth</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>In the following, let&rsquo;s shed some lights on the real nature of values, types and operators in Scala. Ready? Unveil!</p>

<h2>Objects orient Scala&rsquo;s type system</h2>

<p>Behind the curtain, Scala is a purely object-oriented programming language. In fact, every value is an object of some type. Each type is represented by a class which serves as a blueprint for all values of that type. Moreover, every operation in Scala is a method call on some object.</p>

<blockquote><p>Types are classes. Values are objects. Operations are method calls.</p></blockquote>


<p>Primitive types such as String and Double are wrapper classes for Java&rsquo;s primitive types. Let&rsquo;s look at some string concatenation examples to understand this.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="c1">//String concatenations </span>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="s">&quot;apples&quot;</span> <span class="o">+</span> <span class="s">&quot; oranges&quot;</span>
</span><span class='line'><span class="nc">String</span> <span class="k">=</span>  <span class="n">apples</span> <span class="n">oranges</span>
</span><span class='line'>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="n">o</span> <span class="o">*</span> <span class="mi">3</span>
</span><span class='line'><span class="nc">String</span> <span class="k">=</span>  <span class="n">oranges</span>  <span class="n">oranges</span>  <span class="n">oranges</span>
</span><span class='line'>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="mi">3</span> <span class="o">+</span> <span class="s">&quot; oranges&quot;</span>
</span><span class='line'><span class="mi">3</span> <span class="n">oranges</span>
</span></code></pre></td></tr></table></div></figure>


<p>If Scala was not awesome, we would have to rewrite the above concatenations as formal method calls:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="c1">// More verbose concatenations</span>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="s">&quot;apples&quot;</span><span class="o">.+(</span><span class="s">&quot; oranges&quot;</span><span class="o">)</span>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="s">&quot;oranges&quot;</span><span class="o">.*(</span><span class="mi">3</span><span class="o">)</span>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="mf">3.</span><span class="o">+(</span><span class="s">&quot; oranges&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Luckily, any methods with single parameters can be written in Scala as if they were built-in infix operators. Therefore, we can omit the <code>.</code> notation and the parentheses enclosing the single parameter. Instead, we add a space before and after the method name. The cool thing about that is the flexibility to name your binary operations in any way you want as long as the name is a valid identifier.</p>

<h3>Method overloading</h3>

<p>Since Scala is object-oriented, it supports method overloading so that different methods with the same name can be defined provided their signatures are different.</p>

<p>Looking at <code>"apples".+(" oranges")</code>, we see that the concatenation is performed by calling the method <code>+</code> defined on the String object <em>&ldquo;apples&rdquo;</em> with the string parameter <em>&ldquo; oranges&rdquo;</em>. What gets return is the new String object <em>&ldquo;apples oranges&rdquo;</em>. Furthermore, many other signatures exist for the same operator <code>+</code>.
When it comes to <code>"oranges".*(3)</code>, <code>*</code> is another method defined on String and it returns the <em>&ldquo;oranges&rdquo;</em> string concatenated 3 times. If you look at the Scala documentation for StringOps, you will find the signature of this method to be <code>def *(n: Int): String</code>.</p>

<p>Of course, Scala will complain if you call a method on one object and the method signature is not present in the class definition.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="s">&quot;apples&quot;</span> <span class="o">*</span> <span class="mf">3.0</span>
</span><span class='line'><span class="n">error</span><span class="k">:</span> <span class="kt">def</span> <span class="kt">*</span><span class="o">(</span><span class="kt">x:</span> <span class="kt">Double</span><span class="o">)</span><span class="kt">:</span> <span class="kt">String</span> <span class="kt">cannot</span> <span class="kt">be</span> <span class="kt">resolved</span> <span class="kt">on</span> <span class="kt">String</span> <span class="kt">object</span>
</span><span class='line'>
</span><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="mi">3</span> <span class="o">*</span> <span class="s">&quot;oranges&quot;</span>
</span><span class='line'><span class="n">error</span><span class="k">:</span> <span class="kt">def</span> <span class="kt">*</span><span class="o">(</span><span class="kt">s:</span> <span class="kt">String</span><span class="o">)</span><span class="kt">:</span> <span class="kt">String</span> <span class="kt">cannot</span> <span class="kt">be</span> <span class="kt">resolved</span> <span class="kt">on</span> <span class="kt">Int</span> <span class="kt">object</span>
</span></code></pre></td></tr></table></div></figure>


<p>The only exception to this rule is if an <em>implicit conversion</em> is defined for the corresponding type, then the method call can be forwarded to the converted type. But let&rsquo;s keep things simple for now and perhaps, we&rsquo;ll discuss about implicits later on.</p>

<h3>Create Abstract Data Types with Classes</h3>

<p>It is time to create your own types. Classes are used to abstract and parameterize data types that serve as building blocks for your Scala program.</p>

<p><strong> Class definition: </strong> you define a class using the <code>class</code> keyword followed by the class name and class parameters. Optionally, you can add statements and expressions in the class body delimited by a <code>{}</code> block to do one of the following:</p>

<ul>
<li>declare and initialize value and variable fields</li>
<li>define public methods</li>
<li>define private methods helper or nested classes</li>
<li>execute some code, e.g. I/O actions</li>
</ul>


<p>Let&rsquo;s look at a culinary example in which we first define a <em>Recipe</em> class.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">class</span> <span class="nc">Recipe</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">s</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">1</span><span class="o">,</span> <span class="n">instructions</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Nil</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="c1">// some val and var fiels declarations and initializations</span>
</span><span class='line'>  <span class="k">val</span> <span class="n">name</span> <span class="k">=</span> <span class="n">n</span>
</span><span class='line'>  <span class="k">val</span> <span class="n">serves</span> <span class="k">=</span> <span class="n">s</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">var</span> <span class="n">description</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
</span><span class='line'>  <span class="k">var</span> <span class="n">ingredients</span><span class="k">:</span> <span class="kt">Map</span><span class="o">[</span><span class="kt">String</span>, <span class="o">(</span><span class="kt">Double</span>, <span class="kt">String</span><span class="o">)]</span> <span class="k">=</span> <span class="k">_</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong> Class constructor </strong> asks you to specify the parameters <code>s</code>, <code>n</code>, and <code>instructions</code> to create the <code>Recipe</code> objects. For example, you call the constructor method and pass the name, the number of serves and instruction list. As a result, you get a new <em>easyNoodleRecipe</em> object.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">var</span> <span class="n">easyNoodleRecipe</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Recipe</span><span class="o">(</span><span class="s">&quot;Hot Instant Noodle&quot;</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="nc">List</span><span class="o">(</span><span class="s">&quot;Boil water&quot;</span><span class="o">,</span> <span class="s">&quot;Cook noodle&quot;</span><span class="o">,</span> <span class="s">&quot;Serve&quot;</span><span class="o">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Scala also allows us to define default values for some of these parameters so that when we create <em>Recipe</em> objects that have these default values, we no longer need to specify the corresponding parameters when calling the constructor. Behind the scene, Scala simply generates additional constructors during compilation to support this.
For example, we specified a default value of 1 for <code>s</code> and a default empty list for <code>instructions</code> in the class definition. Therefore, we can create an <em>healthySaladRecipe</em> that serves 1 by passing only the other two parameters.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">healthySaladRecipe</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Recipe</span><span class="o">(</span><span class="s">&quot;Healthy green salad&quot;</span><span class="o">,</span> <span class="n">instructions</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="s">&quot;Put greens in a bowl&quot;</span><span class="o">,</span> <span class="s">&quot;Add dressing&quot;</span><span class="o">,</span> <span class="s">&quot;Mix&quot;</span><span class="o">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Similarly, we can create a <em>lazyBurgerRecipe</em> that serves one and has an empty instruction by passing only one parameter, its name.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">var</span> <span class="n">lazyBurgerRecipe</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Recipe</span><span class="o">(</span><span class="s">&quot;Big Mac Burger&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong> Class parameters vs. Class fields: </strong> there is an important difference about the scope of class parameters and var/val fields. Class parameters are not publicly visible unless they are defined with the keyword <code>var</code> or <code>val</code>. In such cases, a getter and/or a setter is generated correspondingly. In contrast, a class field is always defined with one of these keywords. Thus, Scala makes them accessible publicly. Here are some simple rules about the accessibility and visibility of class parameters and fields:</p>

<ol>
<li><strong> Class parameters defined <em>without var/val</em> keyword: </strong> can only be read within the class body definition.</li>
<li><strong> Class parameters defined <em>with val</em>: </strong> a getter is created and the parameter <em>can be read</em> by a user of the class, by the object itself or by another instance of the same class.</li>
<li><strong> Class parameters defined <em>with var</em>: </strong> a getter and a setter are generated so the parameter <em>can be read and also reassigned</em> by a user of the class, by the object itself or by another instance of the same class.</li>
</ol>


<p><strong> Methods vs Functions </strong>
In Scala, methods and functions are defined in the same way using the syntax:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">def</span> <span class="n">methodName</span><span class="o">(</span><span class="n">parameter1</span><span class="k">:</span> <span class="kt">Type1</span><span class="o">,</span> <span class="nc">Parameter2</span><span class="k">:</span> <span class="kt">Type2</span><span class="o">,</span> <span class="o">...)</span><span class="k">:</span> <span class="kt">OutputType</span> <span class="o">=</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">...</span>
</span><span class='line'>  <span class="n">result_expression</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The difference between methods and functions in Scala is similar to that of instance methods and static methods in Java. In Scala, methods are invoked on an object instance with some parameters and are defined inside the class constructor. On the other hand, functions are not invoked on any object; they are simply called with some inputs and return an output. Furthermore, there are two ways to define functions in Scala. First, functions are usually defined inside a singleton object module. If that object is a companion of a class with the same name, then we can make the analogy with static methods in Java. Second, functions can alternatively be defined on the go using functions literals and assigned to a <code>val</code>.</p>

<p>As previously mentionned, when a method is invoked in Scala with a single parameter, it can be interpreted as a binary operation. In fact, we can ommit the dot notation in that case when calling the method and replacing it with spaces between the object, the method name and the parameters. On the other hand, a parameterless method is usually written with a dot notation as if we access a field of the object on which we invoke the method. This programming style is known as <em>universal access principle</em>.</p>

<p>Let&rsquo;s define some examples by defining two methods in the class Recipe&rsquo;s constructor.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">class</span> <span class="nc">Recipe</span><span class="o">(</span><span class="k">val</span> <span class="n">n</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="k">val</span> <span class="n">s</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">1</span><span class="o">,</span> <span class="n">instructions</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Nil</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">var</span> <span class="n">description</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
</span><span class='line'>  <span class="k">var</span> <span class="n">ingredients</span><span class="k">:</span> <span class="kt">Map</span><span class="o">[</span><span class="kt">String</span>, <span class="o">(</span><span class="kt">Double</span>, <span class="kt">String</span><span class="o">)]</span> <span class="k">=</span> <span class="k">_</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// New methods </span>
</span><span class='line'>  <span class="k">def</span> <span class="n">hasNuts</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="n">ingredients</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">toList</span> <span class="n">contains</span> <span class="s">&quot;nuts&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="n">serve</span><span class="o">(</span><span class="n">p</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Map</span><span class="o">[</span><span class="kt">String</span>, <span class="o">(</span><span class="kt">Double</span>, <span class="kt">String</span><span class="o">)]</span> <span class="k">=</span> <span class="k">this</span><span class="o">.</span><span class="n">ingredients</span> <span class="n">mapValues</span> <span class="o">(</span><span class="n">v</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">v</span><span class="o">.</span><span class="n">_1</span> <span class="o">*</span> <span class="n">p</span><span class="o">,</span> <span class="n">v</span><span class="o">.</span><span class="n">_2</span><span class="o">))</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, we can test this in the Scala shell. Let&rsquo;s go back to our <code>healthySaladRecipe</code> and add its ingredients.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="n">healthySaladRecipe</span><span class="o">.</span><span class="n">ingredients</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="s">&quot;Tomatoes&quot;</span><span class="o">,</span><span class="s">&quot;Cucumber&quot;</span><span class="o">,</span><span class="s">&quot;Dressing&quot;</span><span class="o">,</span><span class="s">&quot;Feta cheese&quot;</span><span class="o">)</span> <span class="n">zip</span> <span class="nc">List</span><span class="o">((</span><span class="mf">1.0</span><span class="o">,</span><span class="s">&quot;unit&quot;</span><span class="o">),</span> <span class="o">(</span><span class="mf">1.0</span><span class="o">,</span><span class="s">&quot;unit&quot;</span><span class="o">),</span> <span class="o">(</span><span class="mf">1.0</span><span class="o">,</span><span class="s">&quot;unit&quot;</span><span class="o">),(</span><span class="mf">50.0</span><span class="o">,</span><span class="s">&quot;grams&quot;</span><span class="o">))</span> <span class="n">toMap</span>
</span><span class='line'><span class="n">healthySaladRecipe</span><span class="o">.</span><span class="n">ingredients</span><span class="k">:</span> <span class="kt">Map</span><span class="o">[</span><span class="kt">String</span>,<span class="o">(</span><span class="kt">Double</span>, <span class="kt">String</span><span class="o">)]</span> <span class="k">=</span> <span class="nc">Map</span><span class="o">(</span><span class="nc">Tomatoes</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="mf">1.0</span><span class="o">,</span><span class="n">unit</span><span class="o">),</span> <span class="nc">Cucumber</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="mf">1.0</span><span class="o">,</span><span class="n">unit</span><span class="o">),</span> <span class="nc">Dressing</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="mf">1.0</span><span class="o">,</span><span class="n">unit</span><span class="o">),</span> <span class="nc">Feta</span> <span class="n">cheese</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="mf">50.0</span><span class="o">,</span><span class="n">grams</span><span class="o">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Remember that <code>healthySaladRecipe</code> was defined as a <code>val</code>. However, it had fields defined as <code>var</code> such as ingredients. That means that <code>healthySaladRecipe</code> has a mutable state. This is a key distinction that is important in Scala. Even though an object is bound to a val. It can still changes state even the class of that object has mutable state. Mutable state is definitely to be avoided if we follow the functional programming principles. Here, we simply use this as an example to show that there is a key difference between <code>var</code> vs. <code>var</code> and <code>mutability</code> vs. <code>immutability</code>. In the second part of this tutorial, we will get into more details on this matter.</p>

<blockquote><p>A <code>val</code> that is bound to an object cannot be reassigned to another object. But that does not imply that the object does not have a mutable state!</p></blockquote>

<p>In the above code, we created a map of ingredients from a list of ingredients and a list of quantity. To do that, we invoked the method <code>zip</code> which is defined in <code>scala.collection.immutable.List</code> on the first list and passed the second list as parameter. This is an example of method invocation as binary operator in Scala. Then, we used a parameterless method <code>toMap</code> which is invoked on a list of pairs to create a Map.</p>

<p>By default, any Recipe object will serve one person. Let&rsquo;s check this in the shell.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="n">healthySaladRecipe</span><span class="o">.</span><span class="n">serves</span>
</span><span class='line'><span class="n">res</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">1</span>
</span></code></pre></td></tr></table></div></figure>


<p>So now, what if you invite two of your friends for lunch and you make a healthy salad for the three of you. Well, you can now invoke the <code>serve</code> method that we previously defined for that. What you will obtain is a new list of ingredients with the right quantity for each ingredient.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="n">healthySaladRecipe</span><span class="o">.</span><span class="n">serve</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
</span><span class='line'><span class="n">res</span><span class="k">:</span> <span class="kt">Map</span><span class="o">[</span><span class="kt">String</span>,<span class="o">(</span><span class="kt">Double</span>, <span class="kt">String</span><span class="o">)]</span> <span class="k">=</span> <span class="nc">Map</span><span class="o">(</span><span class="nc">Tomatoes</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="mf">3.0</span><span class="o">,</span><span class="n">unit</span><span class="o">),</span> <span class="nc">Cucumber</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="mf">3.0</span><span class="o">,</span><span class="n">unit</span><span class="o">),</span> <span class="nc">Dressing</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="mf">3.0</span><span class="o">,</span><span class="n">unit</span><span class="o">),</span> <span class="nc">Feta</span> <span class="n">cheese</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="mf">150.0</span><span class="o">,</span><span class="n">grams</span><span class="o">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Let&rsquo;s look closely at the implementation of the <code>serve</code> method.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">def</span> <span class="n">serve</span><span class="o">(</span><span class="n">p</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Map</span><span class="o">[</span><span class="kt">String</span>, <span class="o">(</span><span class="kt">Double</span>, <span class="kt">String</span><span class="o">)]</span> <span class="k">=</span> <span class="k">this</span><span class="o">.</span><span class="n">ingredients</span> <span class="n">mapValues</span> <span class="o">(</span><span class="n">v</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">v</span><span class="o">.</span><span class="n">_1</span> <span class="o">*</span> <span class="n">p</span><span class="o">,</span> <span class="n">v</span><span class="o">.</span><span class="n">_2</span><span class="o">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>We accessed the list of ingredients of <code>healthySaladRecipe</code> and invoked a method <code>mapValues</code> which is defined in <code>scala.collection.immutable.Map</code>. This method takes a function value as parameter and applies that function to each value of the element in the map ingredients. Above, we used a function literal, also called anonymous or lambda function, using scala&rsquo;s syntax:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">v</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">v</span><span class="o">.</span><span class="n">_1</span> <span class="o">*</span> <span class="n">p</span><span class="o">,</span> <span class="n">v</span><span class="o">.</span><span class="n">_2</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>This function literal takes as input <code>v</code>, which has a type of a two-element tuple <code>(Double, String)</code>. Then, it returns of a value of the same type but with the ingredient quantity scaled by the number of serving <code>p</code>. We did not to specify the type signature of the function since Scala could infer to type of <code>v</code> from the type of <code>this.ingredients</code>.</p>

<p>We have reached the end of the Part 1 of this tour on &ldquo;Scala flavors&rdquo;. In Part 2, we will revisit some Scala object-oriented features including <em>case classes</em> and <em>companion objects</em>. We&rsquo;ll also get a taste of <em>first-class functions</em> in Scala. Finally, we&rsquo;ll touch on immutability vs. mutability in Scala.</p>

<div id="disqus_thread"></div>


<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'Rico'; // required: replace example with your forum shortname

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<p><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Rindra Ramamonjison 
<!--   -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span> &#8211;>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = '';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
